/* Teleprompter (c) 2015 by David Schwarz */

var teleprompter=angular.module("teleprompter",["ui.router","ui.router.stateHelper"]);teleprompter.config(["stateHelperProvider","$urlRouterProvider",function(a,b){a.state({name:"root",url:"/",views:{main:{templateUrl:"/page/index.html",controller:"mainCtrl"}}}).state({name:"host",url:"/host",views:{main:{templateUrl:"/page/host.html",controller:"hostCtrl"}}}).state({name:"err404",url:"/err404",views:{main:{templateUrl:"/page/404.html"}}}),b.when("","/"),b.otherwise("/err404")}]),teleprompter.controller("hostCtrl",["$scope","$rootScope","$http","socket",function(a,b,c,d){a.roomId="n/a",d.emit("host"),d.on("host",function(b){a.$apply(function(){a.roomId=b[0]})}),a.$watch("text",function(){d.emit("setText",a.text)}),d.on("setClients",function(b){a.clients=b})}]),teleprompter.controller("mainCtrl",["$scope","$state","socket",function(a,b,c){a.$watch("roomId",function(){c.emit("join",a.roomId)}),c.on("join",function(a){b.go("client")})}]),teleprompter.factory("socket",[function(){var a=io.connect();return{on:function(b,c){a.on(b,function(){var a=arguments;c(a)})},emit:function(b,c,d){a.emit(b,c),d&&d.apply(a)}}}]);